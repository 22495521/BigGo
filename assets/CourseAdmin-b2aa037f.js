import{M as A,D as w}from"./DelCheck-792ca383.js";import{_ as x,o as i,c,d as t,G as l,K as C,H as n,M,f as U,L as V,r as _,e as m,w as j,F as g,A as v,n as f,D as u,t as b}from"./index-4be90b23.js";const L={data(){return{url:"",path:"",myModal:null,ModalData:{},subcontorl:0,AlertData:null}},methods:{openModal(){this.myModal.show()},uploadFile(){const d=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upload",d);const h=`${this.url}/api/${this.path}/admin/upload`;this.$http.post(h,e).then(p=>{this.AlertData.data.imageUrl=p.data.imageUrl}).catch(p=>{console.log(p)})},isaddCourse(){this.subcontorl=0},iseditCourse(){this.subcontorl=1},submit(){this.subcontorl==1&&(console.log(1),this.$http.put(`${this.url}/api/${this.path}/admin/product/${this.AlertData.data.id}`,this.AlertData).then(()=>{this.myModal.hide(),this.$emit("getData"),console.log(this.AlertData),this.$refs.fileInput.value=null,this.cleartAlert()}).catch(d=>{alert(d.data.message)})),this.subcontorl==0&&(console.log(0),this.$http.post(`${this.url}/api/${this.path}/admin/product`,this.AlertData).then(()=>{this.myModal.hide(),this.cleartAlert(),this.$refs.fileInput.value=null,this.$emit("getData")}).catch(d=>{console.log(d)}))},cleartAlert(){this.AlertData={data:{title:null,category:"免費課程",origin_price:0,price:0,unit:null,description:null,content:["","","","","","","","","",""],is_enabled:1,imageUrl:null}}}},created(){this.url="https://vue3-course-api.hexschool.io/v2/",this.path="biggo",this.cleartAlert()},mounted(){const d=new A(this.$refs.CourseModal);this.myModal=d}},N={id:"CourseModal",ref:"CourseModal",class:"modal fade",tabindex:"-1","aria-labelledby":"CourseModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},P={class:"modal-dialog modal-xl"},F={class:"modal-content border-0"},I={class:"modal-header bg-dark text-white"},G={id:"CourseModalLabel",class:"modal-title"},z={key:0},T={key:1},B=t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),S={class:"modal-body mt-5"},q={class:"row"},$={class:"d-flex justify-content-around mb-5"},E={style:{width:"45%"}},H=["src"],K={class:"mt-auto ms-1",style:{width:"45%"}},J=t("label",{for:"fileInput",class:"fs-5 mb-3"},"上傳圖片",-1),O={class:"d-flex justify-content-around"},Q={style:{width:"45%"}},R=t("label",{for:"category",class:"form-label fs-5"},"課程類別",-1),W=U('<option value="免費課程">免費課程</option><option value="啟蒙班">啟蒙班</option><option value="中級班">中級班</option><option value="高級班">高級班</option><option value="段位班">段位班</option>',5),X=[W],Y={style:{width:"45%"}},Z=t("label",{for:"coursename",class:"form-label fs-5"},"課程名稱",-1),tt={class:"d-flex justify-content-around mb-3"},et={style:{width:"45%"}},ot=t("label",{for:"courselv",class:"form-label fs-5"},"課程級數",-1),rt=t("div",{style:{width:"45%"}},null,-1),st={class:"d-flex justify-content-around mb-3"},dt={style:{width:"45%"}},lt=t("label",{for:"oldprice",class:"form-label fs-5"},"原價",-1),at={style:{width:"45%"}},nt=t("label",{for:"price",class:"form-label fs-5"},"售價",-1),it={class:"d-flex justify-content-center mb-3"},ct={style:{width:"95%"}},pt=t("label",{for:"FormControlTextarea",class:"form-label fs-5"},"課程介紹",-1),ut=t("div",{class:"d-flex justify-content-center",style:{"margin-bottom":"0.5rem"}},[t("div",{style:{width:"90%"}},[t("label",{for:"",class:"fs-5"},"課程大綱")])],-1),bt={class:"d-flex justify-content-around mb-2"},ht={class:"input-group",style:{width:"45%"}},_t=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"01.",-1),mt={class:"input-group",style:{width:"45%"}},gt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"06.",-1),ft={class:"d-flex justify-content-around mb-2"},yt={class:"input-group",style:{width:"45%"}},vt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"02.",-1),xt={class:"input-group",style:{width:"45%"}},kt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"07.",-1),Dt={class:"d-flex justify-content-around mb-2"},At={class:"input-group",style:{width:"45%"}},wt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"03.",-1),Ct={class:"input-group",style:{width:"45%"}},Mt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"08.",-1),Ut={class:"d-flex justify-content-around mb-2"},Vt={class:"input-group",style:{width:"45%"}},jt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"04.",-1),Lt={class:"input-group",style:{width:"45%"}},Nt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"09.",-1),Pt={class:"d-flex justify-content-around mb-3"},Ft={class:"input-group",style:{width:"45%"}},It=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"05.",-1),Gt={class:"input-group",style:{width:"45%"}},zt=t("span",{class:"input-group-text border-end-0 border-top border-bottom border-start border-1 border-dark bg-secondary",id:"basic-addon1"},"10.",-1),Tt={class:"form-check text-center mt-1 mb-1"},Bt=t("label",{class:"form-check-label fs-5",for:"is_enabled"},"是否啟用",-1),St={class:"modal-footer justify-content-center py-3"},qt=t("button",{type:"button",class:"btn btn-lg btn-darklight","data-bs-dismiss":"modal"}," 取消 ",-1);function $t(d,e,h,p,o,a){return i(),c("div",N,[t("div",P,[t("div",F,[t("div",I,[t("h5",G,[o.subcontorl?(i(),c("span",z,"課程編輯")):(i(),c("span",T,"新增課程"))]),B]),t("div",S,[t("div",q,[t("div",$,[t("div",E,[t("img",{src:o.AlertData.data.imageUrl,class:"img-fluid",alt:""},null,8,H)]),t("div",K,[J,t("input",{type:"file",id:"fileInput",class:"form-control border-1 border border-dark",ref:"fileInput",onChange:e[0]||(e[0]=(...r)=>a.uploadFile&&a.uploadFile(...r))},null,544)])]),t("div",O,[t("div",Q,[R,l(t("select",{id:"category",class:"form-select form-select-lg mb-3 fs-6 border-1 border border-dark","aria-label":".form-select-lg example","onUpdate:modelValue":e[1]||(e[1]=r=>o.AlertData.data.category=r)},X,512),[[C,o.AlertData.data.category]])]),t("div",Y,[Z,l(t("input",{type:"text",class:"form-control border-1 border border-dark",id:"coursename",placeholder:"請輸入課程名稱","onUpdate:modelValue":e[2]||(e[2]=r=>o.AlertData.data.title=r)},null,512),[[n,o.AlertData.data.title]])])]),t("div",tt,[t("div",et,[ot,l(t("input",{type:"text",class:"form-control border-1 border border-dark",id:"courselv",placeholder:"請輸入適用級數","onUpdate:modelValue":e[3]||(e[3]=r=>o.AlertData.data.unit=r)},null,512),[[n,o.AlertData.data.unit]])]),rt]),t("div",st,[t("div",dt,[lt,l(t("input",{type:"number",class:"form-control border-1 border border-dark",id:"oldprice",placeholder:"請輸入課程原價","onUpdate:modelValue":e[4]||(e[4]=r=>o.AlertData.data.origin_price=r)},null,512),[[n,o.AlertData.data.origin_price]])]),t("div",at,[nt,l(t("input",{type:"number",class:"form-control border-1 border border-dark",id:"price",placeholder:"請輸入課程售價","onUpdate:modelValue":e[5]||(e[5]=r=>o.AlertData.data.price=r)},null,512),[[n,o.AlertData.data.price]])])])]),t("div",it,[t("div",ct,[pt,l(t("textarea",{class:"form-control border-1 border border-dark",id:"FormControlTextarea",rows:"3",placeholder:"請輸入課程介紹","onUpdate:modelValue":e[6]||(e[6]=r=>o.AlertData.data.description=r)},null,512),[[n,o.AlertData.data.description]])])]),t("div",null,[ut,t("div",bt,[t("div",ht,[_t,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[7]||(e[7]=r=>o.AlertData.data.content[0]=r)},null,512),[[n,o.AlertData.data.content[0]]])]),t("div",mt,[gt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[8]||(e[8]=r=>o.AlertData.data.content[5]=r)},null,512),[[n,o.AlertData.data.content[5]]])])]),t("div",ft,[t("div",yt,[vt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[9]||(e[9]=r=>o.AlertData.data.content[1]=r)},null,512),[[n,o.AlertData.data.content[1]]])]),t("div",xt,[kt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[10]||(e[10]=r=>o.AlertData.data.content[6]=r)},null,512),[[n,o.AlertData.data.content[6]]])])]),t("div",Dt,[t("div",At,[wt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[11]||(e[11]=r=>o.AlertData.data.content[2]=r)},null,512),[[n,o.AlertData.data.content[2]]])]),t("div",Ct,[Mt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[12]||(e[12]=r=>o.AlertData.data.content[7]=r)},null,512),[[n,o.AlertData.data.content[7]]])])]),t("div",Ut,[t("div",Vt,[jt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[13]||(e[13]=r=>o.AlertData.data.content[3]=r)},null,512),[[n,o.AlertData.data.content[3]]])]),t("div",Lt,[Nt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[14]||(e[14]=r=>o.AlertData.data.content[8]=r)},null,512),[[n,o.AlertData.data.content[8]]])])]),t("div",Pt,[t("div",Ft,[It,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[15]||(e[15]=r=>o.AlertData.data.content[4]=r)},null,512),[[n,o.AlertData.data.content[4]]])]),t("div",Gt,[zt,l(t("input",{type:"text",class:"form-control border-top border-start-0 border-bottom border-end border-1 border-dark",placeholder:"輕輸入課程大綱","onUpdate:modelValue":e[16]||(e[16]=r=>o.AlertData.data.content[9]=r)},null,512),[[n,o.AlertData.data.content[9]]])])]),t("div",Tt,[l(t("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[17]||(e[17]=r=>o.AlertData.data.is_enabled=r),style:{float:"none","margin-left":"0","margin-right":"8px",width:"20px",height:"20px"}},null,512),[[M,o.AlertData.data.is_enabled]]),Bt])])]),t("div",St,[qt,t("button",{type:"button",class:"btn-lg btn btn-success",onClick:e[18]||(e[18]=(...r)=>a.submit&&a.submit(...r))}," 完成 ")])])])],512)}const Et=x(L,[["render",$t]]),Ht={components:{CourseAlert:Et,CoursedelCheck:w,Loading:V},data(){return{url:"",path:"",total_pages:null,has_pre:null,has_next:null,Nowpage:1,pagination:null,products:{},fullPage:!0,isLoading:!1}},methods:{getData(){this.isLoading=!0;const d=`${this.url}api/${this.path}/admin/products/?page=${this.Nowpage}`;this.$http.get(d).then(e=>{this.products=e.data.products,console.log(123),this.isLoading=!1,console.log(321),this.pagination={...e.data.pagination},this.total_pages=e.data.pagination.total_pages,this.has_pre=e.data.pagination.has_pre,this.has_next=e.data.pagination.has_next}).catch(e=>{console.log(e)})},addCourse(){this.$refs.courseModal.isaddCourse(),this.$refs.courseModal.cleartAlert(),this.$refs.courseModal.openModal()},editCourse(d){this.$refs.courseModal.iseditCourse(),this.$refs.courseModal.AlertData.data={...d},this.$refs.courseModal.openModal()},daleteCourse(d){this.$refs.delModal.isorder=0,this.$refs.delModal.openModal(d)},clickpage(d){this.Nowpage=d,this.getData()},plusPage(){this.Nowpage+=1,this.getData()},reducePage(){this.Nowpage-=1,this.getData()}},created(){this.url="https://vue3-course-api.hexschool.io/v2/",this.path="biggo",this.getData()}},Kt=t("div",{class:"loadingio-spinner-dual-ball-laqyobj2qgl"},[t("div",{class:"ldio-sh19xg6jfo"},[t("div"),t("div"),t("div")])],-1),Jt={class:"container my-5"},Ot={class:"d-flex mb-5"},Qt=t("div",{class:"flex-grow-1 text-center"},[t("h2",{style:{"font-size":"48px"}},"課程管理")],-1),Rt={class:"mb-4"},Wt={class:"table text-center",style:{"font-size":"20px"}},Xt=t("thead",null,[t("tr",null,[t("th",{scope:"col",style:{width:"20%"}},"課程類別"),t("th",{scope:"col",style:{width:"20%"}},"課程名稱"),t("th",{scope:"col",style:{width:"20%"}},"售價"),t("th",{scope:"col",style:{width:"20%"}},"是否啟用"),t("th",{scope:"col",style:{width:"20%"}},"編輯")])],-1),Yt={key:0,style:{color:"green"}},Zt={key:1,style:{color:"red"}},te={class:"d-flex p-0 justify-content-center"},ee=["onClick"],oe=["onClick"],re={class:"d-flex justify-content-center"},se={"aria-label":"Page navigation"},de={class:"pagination pagination-lg"},le={class:"page-item"},ae=["onClick"],ne={class:"page-link",href:"#"},ie={class:"page-item"};function ce(d,e,h,p,o,a){const r=_("loading"),k=_("Coursedel-Check"),D=_("Course-Alert");return i(),c(g,null,[m(r,{active:o.isLoading,"onUpdate:active":e[0]||(e[0]=s=>o.isLoading=s),"can-cancel":!1,"is-full-page":o.fullPage},{default:j(()=>[Kt]),_:1},8,["active","is-full-page"]),t("div",Jt,[t("div",Ot,[Qt,t("div",null,[t("button",{class:"btn btn-success text-nowrap",style:{padding:"8px 32px",width:"160px",height:"64px","font-size":"24px"},onClick:e[1]||(e[1]=(...s)=>a.addCourse&&a.addCourse(...s))}," 新增課程 ")])]),t("div",Rt,[t("table",Wt,[Xt,t("tbody",null,[(i(!0),c(g,null,v(o.products,s=>(i(),c("tr",{key:s.id},[t("td",null,b(s.category),1),t("td",null,b(s.title),1),t("td",null,"NT"+b(s.price),1),s.is_enabled?(i(),c("td",Yt,"啟用")):(i(),c("td",Zt,"不啟用")),t("td",te,[t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#e8f8e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:u(y=>a.editCourse(s),["prevent"])},"編輯",8,ee),t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#f8e7e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:u(y=>a.daleteCourse(s.id),["prevent"])},"刪除",8,oe)])]))),128))])])]),t("div",re,[t("nav",se,[t("ul",de,[t("li",le,[t("a",{class:f(["page-link",{disabled:o.has_pre==!1}]),href:"#",onClick:e[2]||(e[2]=u((...s)=>a.reducePage&&a.reducePage(...s),["prevent"]))},"上一頁",2)]),(i(!0),c(g,null,v(o.total_pages,s=>(i(),c("li",{class:f(["page-item",{active:o.Nowpage==s}]),key:`${s}1234`,onClick:u(y=>a.clickpage(s),["prevent"])},[t("a",ne,b(s),1)],10,ae))),128)),t("li",ie,[t("a",{class:f(["page-link",{disabled:o.has_next==!1}]),href:"#",onClick:e[3]||(e[3]=u((...s)=>a.plusPage&&a.plusPage(...s),["prevent"]))},"下一頁",2)])])])])]),m(k,{ref:"delModal",onGetData:a.getData},null,8,["onGetData"]),m(D,{ref:"courseModal",onGetData:a.getData},null,8,["onGetData"])],64)}const be=x(Ht,[["render",ce]]);export{be as default};
