import{M as v,D as w}from"./DelCheck-b42a09cb.js";import{_ as m,o as d,c as i,f as D,b as t,A as a,F as h,y as b,r as p,s as _,z as r,d as u}from"./index-ce4417ee.js";const M={data(){return{myModal:null}},methods:{openModal(){this.myModal.show()}},mounted(){const e=new v(this.$refs.OrderModal);this.myModal=e}},$={id:"OrderModal",ref:"OrderModal",class:"modal fade",tabindex:"-1","aria-labelledby":"OrderModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},C=D('<div class="modal-dialog modal-xl"><div class="modal-content border-0"><div class="modal-header bg-dark text-white"><h5 id="OrderModalLabel" class="modal-title"><span>訂單詳情</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body mt-5"><div class="row"></div></div><div class="modal-footer justify-content-center py-3"><button type="button" class="btn btn-lg" style="background-color:#cccccc;" data-bs-dismiss="modal"> 取消 </button><button type="button" class="btn-lg btn btn-success">完成</button></div></div></div>',1),N=[C];function O(e,s,g,f,o,n){return d(),i("div",$,N,512)}const z=m(M,[["render",O]]),j={data(){return{myModal:null,products:null,user:{name:null},order:{id:null},total:null}},methods:{openModal(e){this.order=e,this.products=e.products,this.user=e.user,this.total=e.total,this.myModal.show(),console.log(this.order)},formatDate(e){const s=new Date(e*1e3);return s.toLocaleString(s)}},mounted(){const e=new v(this.$refs.DetailModal);this.myModal=e}},L={id:"DetailModal",ref:"DetailModal",class:"modal fade",tabindex:"-1","aria-labelledby":"DetailModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},P={class:"modal-dialog modal-xl"},A={class:"modal-content border-0"},S=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"DetailModalLabel",class:"modal-title"},[t("span",null,"訂單詳情")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-body d-flex justify-content-center pt-5"},E={style:{width:"60%","line-height":"140%"}},V=t("p",{class:"fw-bold",style:{"font-size":"24px"}},"客戶資訊",-1),F={style:{"font-size":"20px"}},G=t("hr",{style:{border:"1px solid #000000"}},null,-1),T=t("p",{class:"fw-bold",style:{"font-size":"24px"}},"訂單資訊",-1),q={style:{"font-size":"20px"}},H=t("hr",{style:{border:"1px solid #000000"}},null,-1),I=t("p",{class:"fw-bold",style:{"font-size":"24px"}},"訂單明細",-1),J={style:{"font-size":"20px"}},K={class:"pe-3"},Q={class:"d-flex justify-content-between py-3 px-3",style:{"background-color":"#efefef"}},R=t("p",{class:"mb-0"},"總計金額",-1),U={class:"mb-0"},W=t("div",{class:"modal-footer justify-content-center",style:{border:"none"}},[t("button",{type:"button",class:"btn btn-lg btn-darklight","data-bs-dismiss":"modal"}," 關閉 ")],-1);function X(e,s,g,f,o,n){return d(),i("div",L,[t("div",P,[t("div",A,[S,t("div",B,[t("div",E,[V,t("div",F,[t("p",null,"Email : "+a(o.user.email),1),t("p",null,"姓名 : "+a(o.user.name),1),t("p",null,"手機 : "+a(o.user.tel),1),t("p",null,"地址 : "+a(o.user.address),1)]),G,T,t("div",q,[t("p",null,"訂單編號 : "+a(o.order.id),1),t("p",null,"訂單日期 : "+a(n.formatDate(o.order.create_at)),1),t("p",null,"留言 : "+a(o.order.message),1)]),H,I,t("div",J,[(d(!0),i(h,null,b(o.products,c=>(d(),i("div",{key:c.id,class:"d-flex justify-content-between"},[t("p",null,a(c.product.category)+"-"+a(c.product.title),1),t("p",K,"NT$"+a(c.total),1)]))),128)),t("div",Q,[R,t("p",U,"NT$"+a(o.total),1)])])])]),W])])],512)}const Y=m(j,[["render",X]]),Z={components:{DelCheck:w,OrderAlert:z,orderDetail:Y},data(){return{url:"",path:"",total_pages:null,has_pre:null,has_next:null,Nowpage:1,pagination:null,orders:{}}},methods:{getData(){const e=`${this.url}api/${this.path}/admin/orders?page=${this.Nowpage}`;this.$http.get(e).then(s=>{this.orders=s.data.orders,this.pagination=s.data.pagination,this.total_pages=s.data.pagination.total_pages,this.has_next=s.data.pagination.has_next,this.has_pre=s.data.pagination.has_pre,console.log(this.orders)}).catch(s=>{console.log(s)})},openDetail(e){this.$refs.DetailModal.openModal(e)},daleteOrder(e){this.$refs.delModal.isorder=1,this.$refs.delModal.openModal(e)},formatDate(e){const s=new Date(e*1e3);return s.toLocaleString(s)},clickpage(e){this.Nowpage=e,this.getData()},plusPage(){this.Nowpage+=1,this.getData()},reducePage(){this.Nowpage-=1,this.getData()}},created(){this.url="https://vue3-course-api.hexschool.io/v2/",this.path="biggo",this.getData()}},tt={class:"container my-5"},et=t("div",{class:"d-flex mb-5"},[t("div",{class:"flex-grow-1 text-center"},[t("h2",{style:{"font-size":"48px"}},"訂單管理")])],-1),st={class:"mb-4"},ot={class:"table text-center",style:{"font-size":"20px"}},lt=t("thead",null,[t("tr",null,[t("th",{scope:"col",style:{width:"20%"}},"訂單編號"),t("th",{scope:"col",style:{width:"20%"}},"訂單日期"),t("th",{scope:"col",style:{width:"20%"}},"姓名"),t("th",{scope:"col",style:{width:"20%"}},"Email"),t("th",{scope:"col",style:{width:"20%"}},"操作")])],-1),at={class:"text-nowrap"},nt={class:"d-flex p-0 justify-content-center"},dt=["onClick"],it=["onClick"],ct={class:"d-flex justify-content-center"},rt={"aria-label":"Page navigation"},ht={class:"pagination pagination-lg"},pt={class:"page-item"},_t=["onClick"],ut={class:"page-link",href:"#"},bt={class:"page-item"};function mt(e,s,g,f,o,n){const c=p("Del-Check"),x=p("OrderAlert"),k=p("orderDetail");return d(),i(h,null,[t("div",tt,[et,t("div",st,[t("table",ot,[lt,t("tbody",null,[(d(!0),i(h,null,b(o.orders,l=>(d(),i("tr",{key:l.id},[t("td",at,a(l.id),1),t("td",null,a(n.formatDate(l.create_at)),1),t("td",null,a(l.user.name),1),t("td",null,a(l.user.email),1),t("td",nt,[t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#e8f8e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:r(y=>n.openDetail(l),["prevent"])},"詳情",8,dt),t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#f8e7e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:r(y=>n.daleteOrder(l.id),["prevent"])},"刪除",8,it)])]))),128))])])]),t("div",ct,[t("nav",rt,[t("ul",ht,[t("li",pt,[t("a",{class:_(["page-link",{disabled:o.has_pre==!1}]),href:"#",onClick:s[0]||(s[0]=r((...l)=>n.reducePage&&n.reducePage(...l),["prevent"]))},"上一頁",2)]),(d(!0),i(h,null,b(o.total_pages,l=>(d(),i("li",{class:_(["page-item",{active:o.Nowpage==l}]),key:`${l}1234`,onClick:r(y=>n.clickpage(l),["prevent"])},[t("a",ut,a(l),1)],10,_t))),128)),t("li",bt,[t("a",{class:_(["page-link",{disabled:o.has_next==!1}]),href:"#",onClick:s[1]||(s[1]=r((...l)=>n.plusPage&&n.plusPage(...l),["prevent"]))},"下一頁",2)])])])])]),u(c,{ref:"delModal",onGetData:n.getData},null,8,["onGetData"]),u(x,{ref:"editModal"},null,512),u(k,{ref:"DetailModal"},null,512)],64)}const yt=m(Z,[["render",mt]]);export{yt as default};
