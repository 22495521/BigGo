import{M as v,D}from"./DelCheck-82cb6d1d.js";import{_ as b,o as i,d,g as M,e as t,t as a,F as u,A as g,B as $,L as C,r as h,f as p,w as L,n as _,D as r}from"./index-fcc00eca.js";import"./base-component-fe4d333f.js";const N={data(){return{myModal:null}},methods:{openModal(){this.myModal.show()}},mounted(){const e=new v(this.$refs.OrderModal);this.myModal=e}},O={id:"OrderModal",ref:"OrderModal",class:"modal fade",tabindex:"-1","aria-labelledby":"OrderModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},j=M('<div class="modal-dialog modal-xl"><div class="modal-content border-0"><div class="modal-header bg-dark text-white"><h5 id="OrderModalLabel" class="modal-title"><span>訂單詳情</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body mt-5"><div class="row"></div></div><div class="modal-footer justify-content-center py-3"><button type="button" class="btn btn-lg" style="background-color:#cccccc;" data-bs-dismiss="modal"> 取消 </button><button type="button" class="btn-lg btn btn-success">完成</button></div></div></div>',1),z=[j];function P(e,s,f,m,o,n){return i(),d("div",O,z,512)}const A=b(N,[["render",P]]),B={data(){return{myModal:null,products:null,user:{},order:{},total:null}},methods:{openModal(e){this.order=e,this.products=e.products,this.user=e.user,this.total=e.total,this.myModal.show()},formatDate(e){const s=new Date(e*1e3);return s.toLocaleString(s)}},mounted(){const e=new v(this.$refs.DetailModal);this.myModal=e}},S={id:"DetailModal",ref:"DetailModal",class:"modal fade",tabindex:"-1","aria-labelledby":"DetailModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},V={class:"modal-dialog modal-xl"},E={key:0,class:"modal-content border-0"},q=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"DetailModalLabel",class:"modal-title"},[t("span",null,"訂單詳情")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body d-flex justify-content-center pt-5"},G={style:{width:"60%","line-height":"140%"}},T=t("p",{class:"fw-bold",style:{"font-size":"24px"}},"客戶資訊",-1),U={style:{"font-size":"20px"}},H=t("hr",{style:{border:"1px solid #000000"}},null,-1),I=t("p",{class:"fw-bold",style:{"font-size":"24px"}},"訂單資訊",-1),J={style:{"font-size":"20px"}},K=t("hr",{style:{border:"1px solid #000000"}},null,-1),Q=t("p",{class:"fw-bold",style:{"font-size":"24px"}},"訂單明細",-1),R={style:{"font-size":"20px"}},W={class:"pe-3"},X={class:"d-flex justify-content-between py-3 px-3",style:{"background-color":"#efefef"}},Y=t("p",{class:"mb-0"},"總計金額",-1),Z={class:"mb-0"},tt=t("div",{class:"modal-footer justify-content-center",style:{border:"none"}},[t("button",{type:"button",class:"btn btn-lg btn-darklight","data-bs-dismiss":"modal"}," 關閉 ")],-1);function et(e,s,f,m,o,n){return i(),d("div",S,[t("div",V,[o.products?(i(),d("div",E,[q,t("div",F,[t("div",G,[T,t("div",U,[t("p",null,"Email : "+a(o.user.email),1),t("p",null,"姓名 : "+a(o.user.name),1),t("p",null,"手機 : "+a(o.user.tel),1),t("p",null,"地址 : "+a(o.user.address),1)]),H,I,t("div",J,[t("p",null,"訂單編號 : "+a(o.order.id),1),t("p",null,"訂單日期 : "+a(n.formatDate(o.order.create_at)),1),t("p",null,"留言 : "+a(o.order.message),1)]),K,Q,t("div",R,[(i(!0),d(u,null,g(o.products,c=>(i(),d("div",{key:c.id,class:"d-flex justify-content-between"},[t("p",null,a(c.product.category)+"-"+a(c.product.title),1),t("p",W,"NT$"+a(c.total),1)]))),128)),t("div",X,[Y,t("p",Z,"NT$"+a(o.total),1)])])])]),tt])):$("",!0)])],512)}const st=b(B,[["render",et]]),ot={components:{DelCheck:D,OrderAlert:A,orderDetail:st,Loading:C},data(){return{url:"",path:"",total_pages:null,has_pre:null,has_next:null,Nowpage:1,pagination:null,orders:{},fullPage:!0,isLoading:!1}},methods:{getData(){this.isLoading=!0;const e=`${this.url}api/${this.path}/admin/orders?page=${this.Nowpage}`;this.$http.get(e).then(s=>{this.orders=s.data.orders,this.pagination=s.data.pagination,this.total_pages=s.data.pagination.total_pages,this.has_next=s.data.pagination.has_next,this.has_pre=s.data.pagination.has_pre,this.isLoading=!1}).catch(s=>{console.log(s)})},openDetail(e){this.$refs.DetailModal.openModal(e)},daleteOrder(e){this.$refs.delModal.isorder=1,this.$refs.delModal.openModal(e)},formatDate(e){const s=new Date(e*1e3);return s.toLocaleString(s)},clickpage(e){this.Nowpage=e,this.getData()},plusPage(){this.Nowpage+=1,this.getData()},reducePage(){this.Nowpage-=1,this.getData()}},created(){this.url="https://vue3-course-api.hexschool.io/v2/",this.path="biggo",this.getData()}},lt=t("div",{class:"loadingio-spinner-dual-ball-laqyobj2qgl"},[t("div",{class:"ldio-sh19xg6jfo"},[t("div"),t("div"),t("div")])],-1),at={class:"container my-5"},nt=t("div",{class:"d-flex mb-5"},[t("div",{class:"flex-grow-1 text-center"},[t("h2",{style:{"font-size":"48px"}},"訂單管理")])],-1),it={class:"mb-4"},dt={class:"table text-center",style:{"font-size":"20px"}},ct=t("thead",null,[t("tr",null,[t("th",{scope:"col",style:{width:"20%"}},"訂單編號"),t("th",{scope:"col",style:{width:"20%"}},"訂單日期"),t("th",{scope:"col",style:{width:"20%"}},"姓名"),t("th",{scope:"col",style:{width:"20%"}},"Email"),t("th",{scope:"col",style:{width:"20%"}},"操作")])],-1),rt={class:"text-nowrap"},ht={class:"d-flex p-0 justify-content-center"},pt=["onClick"],ut=["onClick"],_t={class:"d-flex justify-content-center"},gt={"aria-label":"Page navigation"},bt={class:"pagination pagination-lg"},ft={class:"page-item"},mt=["onClick"],yt={class:"page-link",href:"#"},vt={class:"page-item"};function xt(e,s,f,m,o,n){const c=h("loading"),x=h("Del-Check"),k=h("OrderAlert"),w=h("orderDetail");return i(),d(u,null,[p(c,{active:o.isLoading,"onUpdate:active":s[0]||(s[0]=l=>o.isLoading=l),"can-cancel":!1,"is-full-page":o.fullPage},{default:L(()=>[lt]),_:1},8,["active","is-full-page"]),t("div",at,[nt,t("div",it,[t("table",dt,[ct,t("tbody",null,[(i(!0),d(u,null,g(o.orders,l=>(i(),d("tr",{key:l.id},[t("td",rt,a(l.id),1),t("td",null,a(n.formatDate(l.create_at)),1),t("td",null,a(l.user.name),1),t("td",null,a(l.user.email),1),t("td",ht,[t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#e8f8e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:r(y=>n.openDetail(l),["prevent"])},"詳情",8,pt),t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#f8e7e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:r(y=>n.daleteOrder(l.id),["prevent"])},"刪除",8,ut)])]))),128))])])]),t("div",_t,[t("nav",gt,[t("ul",bt,[t("li",ft,[t("a",{class:_(["page-link",{disabled:o.has_pre==!1}]),href:"#",onClick:s[1]||(s[1]=r((...l)=>n.reducePage&&n.reducePage(...l),["prevent"]))},"上一頁",2)]),(i(!0),d(u,null,g(o.total_pages,l=>(i(),d("li",{class:_(["page-item",{active:o.Nowpage==l}]),key:`${l}1234`,onClick:r(y=>n.clickpage(l),["prevent"])},[t("a",yt,a(l),1)],10,mt))),128)),t("li",vt,[t("a",{class:_(["page-link",{disabled:o.has_next==!1}]),href:"#",onClick:s[2]||(s[2]=r((...l)=>n.plusPage&&n.plusPage(...l),["prevent"]))},"下一頁",2)])])])])]),p(x,{ref:"delModal",onGetData:n.getData},null,8,["onGetData"]),p(k,{ref:"editModal"},null,512),p(w,{ref:"DetailModal"},null,512)],64)}const Mt=b(ot,[["render",xt]]);export{Mt as default};
