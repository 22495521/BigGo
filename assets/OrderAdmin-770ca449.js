import{M as k,D as x}from"./DelCheck-d064fffc.js";import{_ as m,o as n,c as d,f as w,r as u,b as t,F as h,y as _,s as p,z as i,d as g,A as r}from"./index-bb7a91db.js";const M={data(){return{myModal:null}},methods:{openModal(){this.myModal.show()}},mounted(){const s=new k(this.$refs.OrderModal);this.myModal=s}},D={id:"OrderModal",ref:"OrderModal",class:"modal fade",tabindex:"-1","aria-labelledby":"OrderModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},O=w('<div class="modal-dialog modal-xl"><div class="modal-content border-0"><div class="modal-header bg-dark text-white"><h5 id="OrderModalLabel" class="modal-title"><span>訂單詳情</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body mt-5"><div class="row"></div></div><div class="modal-footer justify-content-center py-3"><button type="button" class="btn btn-lg" style="background-color:#cccccc;" data-bs-dismiss="modal"> 取消 </button><button type="button" class="btn-lg btn btn-success">完成</button></div></div></div>',1),C=[O];function N(s,e,b,f,l,o){return n(),d("div",D,C,512)}const $=m(M,[["render",N]]),P={components:{DelCheck:x,OrderAlert:$},data(){return{url:"",path:"",total_pages:null,has_pre:null,has_next:null,Nowpage:1,pagination:null,orders:{}}},methods:{getData(){const s=`${this.url}api/${this.path}/admin/orders?page=${this.Nowpage}`;this.$http.get(s).then(e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.total_pages=e.data.pagination.total_pages,this.has_next=e.data.pagination.has_next,this.has_pre=e.data.pagination.has_pre,console.log(this.orders)}).catch(e=>{console.log(e)})},editOrder(){this.$refs.editModal.openModal()},daleteOrder(s){this.$refs.delModal.isorder=1,this.$refs.delModal.openModal(s)},formatDate(s){const e=new Date(s*1e3);return e.toLocaleString(e)},clickpage(s){this.Nowpage=s,this.getData()},plusPage(){this.Nowpage+=1,this.getData()},reducePage(){this.Nowpage-=1,this.getData()}},created(){this.url="https://vue3-course-api.hexschool.io/v2/",this.path="biggo",this.getData()}},A={class:"container my-5"},z=t("div",{class:"d-flex mb-5"},[t("div",{class:"flex-grow-1 text-center"},[t("h2",{style:{"font-size":"48px"}},"訂單管理")])],-1),L={class:"mb-4"},j={class:"table text-center",style:{"font-size":"20px"}},B=t("thead",null,[t("tr",null,[t("th",{scope:"col",style:{width:"20%"}},"訂單編號"),t("th",{scope:"col",style:{width:"20%"}},"訂單日期"),t("th",{scope:"col",style:{width:"20%"}},"姓名"),t("th",{scope:"col",style:{width:"20%"}},"Email"),t("th",{scope:"col",style:{width:"20%"}},"操作")])],-1),S={class:"text-nowrap"},V={class:"d-flex p-0 justify-content-center"},E=["onClick"],F={class:"d-flex justify-content-center"},G={"aria-label":"Page navigation"},q={class:"pagination pagination-lg"},H={class:"page-item"},I=["onClick"],J={class:"page-link",href:"#"},K={class:"page-item"};function Q(s,e,b,f,l,o){const v=u("Del-Check"),y=u("OrderAlert");return n(),d(h,null,[t("div",A,[z,t("div",L,[t("table",j,[B,t("tbody",null,[(n(!0),d(h,null,_(l.orders,a=>(n(),d("tr",{key:a.id},[t("td",S,r(a.id),1),t("td",null,r(o.formatDate(a.create_at)),1),t("td",null,r(a.user.name),1),t("td",null,r(a.user.email),1),t("td",V,[t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#e8f8e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:e[0]||(e[0]=i((...c)=>o.editOrder&&o.editOrder(...c),["prevent"]))},"詳情"),t("a",{href:"#",style:{"text-decoration":"none",display:"block",width:"50%",height:"100%","background-color":"#f8e7e7",padding:"0.5rem 28px 0.5rem 28px",color:"black"},onClick:i(c=>o.daleteOrder(a.id),["prevent"])},"刪除",8,E)])]))),128))])])]),t("div",F,[t("nav",G,[t("ul",q,[t("li",H,[t("a",{class:p(["page-link",{disabled:l.has_pre==!1}]),href:"#",onClick:e[1]||(e[1]=i((...a)=>o.reducePage&&o.reducePage(...a),["prevent"]))},"上一頁",2)]),(n(!0),d(h,null,_(l.total_pages,a=>(n(),d("li",{class:p(["page-item",{active:l.Nowpage==a}]),key:`${a}1234`,onClick:i(c=>o.clickpage(a),["prevent"])},[t("a",J,r(a),1)],10,I))),128)),t("li",K,[t("a",{class:p(["page-link",{disabled:l.has_next==!1}]),href:"#",onClick:e[2]||(e[2]=i((...a)=>o.plusPage&&o.plusPage(...a),["prevent"]))},"下一頁",2)])])])])]),g(v,{ref:"delModal",onGetData:o.getData},null,8,["onGetData"]),g(y,{ref:"editModal"},null,512)],64)}const U=m(P,[["render",Q]]);export{U as default};
